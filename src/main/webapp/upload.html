<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>UploadImg</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
        body { margin:0px; padding:0px; font-family:Arial; font-size:12px; }
        p { margin:0px; padding:4px 0px; }
        input { border:solid 1px #ddd;}
        input.btn{ border-bottom-color:#999; border-right-color:#999;}
        #sp_err { color:#ff0000; }
    </style>
</head>
<body>
<form action="" method="post" enctype="multipart/form-data" onsubmit="return chkForm();">
    <div style="padding:20px;">
        <p>选择你要上传的图片文件</p>
        <p><input id="file1" name="file1" type="file" style="width:220px;" /> <input id="btnUp" class="btn" type="submit" value="上 传" /></p>
        <p>1、图片大小不能超过<b>2M</b></p>
        <p>2、支持格式：.jpg .gif .png .bmp</p>
        <p>3、如需管理图片，请进入<a href="http://my.csdn.net/my/album" target="_blank">个人空间相册</a></p>
        <p><span id="sp_err"></span></p>
    </div>
</form>
<script type="text/javascript">
    function setPath(path) {
        parent.document.getElementById("xheImgUrl").value = path;
        parent.xh.removeModal();
    }
    function showErr(err){
        document.getElementById("sp_err").innerHTML = "* " + err;
    }
    function chkForm() {
        var f = document.getElementById("file1").value;
        if (!f) {
            showErr("请选择要上传的图片。");
            return false;
        }
        var ext = f.substr(f.lastIndexOf(".") + 1).toLowerCase();
        if (".jpg.gif.png.bmp.".indexOf('.' + ext + '.') == -1) {
            showErr("图片格式不正确。");
            return false;
        }
        document.getElementById('btnUp').value='正在上传...';
        document.getElementById('btnUp').disabled=true;
        return true;
    }

</script>
</body>
</html>
