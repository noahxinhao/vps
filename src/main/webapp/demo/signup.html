<html>
<head>
    <title>注册</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8"/>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.css"/>
    <script type="text/javascript" src="../js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../plugin/angular/angular.js"></script>
    <script src="../js/bootstrap.js"></script>
    <style>
        #editor {
            overflow: scroll;
            max-height: 300px
        }
        .im-editor small{
            color: rgb(135, 0, 0);
        }
    </style>
    <script>
        var verfityApp = angular.module('userSignup', []);
        verfityApp.controller('signupController', ['$scope', function ($scope) {
            $scope.submitted = false;
            $scope.submitForm = function () {
                if ($scope.signupForm.$valid) {
                    if($scope.user.confirmPassword==$scope.user.userpassword){
                        alert('ok');
                    }
                } else {
                    $scope.submitted = true;
                }
            }
        }]);
    </script>
</head>
<body>
<div class="container">
    <div class="row" ng-app="userSignup">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12" style="height: 50px"></div>
                <div class="col-md-8">
                </div>
                <div class="col-md-4">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">用户注册
                                <span class="pull-right" style="font-size: 13px">已有帐号？您可以直接<a
                                        href="/signin">登录</a></span>
                            </h3>
                        </div>
                        <div class="panel-body" ng-controller="signupController">
                            <form role="form" class="im-editor" name="signupForm" novalidate ng-submit="submitForm()">
                                <div class="form-group" ng-class="{true: 'form-group has-error', false: 'form-group'}[signupForm.email.$invalid && submitted]">
                                    <label for="InputEmail1">邮箱/手机号码</label>
                                    <span class="pull-right"
                                          ng-show="signupForm.email.$dirty && signupForm.email.$invalid&& submitted">
                                        <small ng-show="signupForm.email.$error.required">请输入邮箱或手机号码</small>
                                        <small ng-show="signupForm.email.$error.minlength">请输入6~15位字符</small>
                                        <small ng-show="signupForm.email.$error.maxlength">请输入6~15位字符</small>
                                        <small ng-show="signupForm.email.$error.email">请输入正确格式的邮箱地址</small>
                                    </span>
                                    <input type="email"
                                           placeholder="请输入邮箱或手机号码"
                                           name="email"
                                           ng-model="user.email"
                                           ng-minlength=3 ng-maxlength=20 required
                                           id="InputEmail1"
                                           class="form-control"/>
                                </div>
                                <div class="form-group" ng-class="{true: 'form-group has-error', false: 'form-group'}[signupForm.userpassword.$invalid && submitted]">
                                    <label for="userPassword">密&nbsp;码</label>
                                    <span class="pull-right"
                                          ng-show="signupForm.userpassword.$dirty && signupForm.userpassword.$invalid&& submitted">
                                        <small ng-show="signupForm.userpassword.$error.required">请输入密码</small>
                                        <small ng-show="signupForm.userpassword.$error.minlength">请输入6~15位密码字符</small>
                                        <small ng-show="signupForm.userpassword.$error.maxlength">请输入6~15位密码字符</small>
                                        <small ng-show="signupForm.userpassword.$error.userpassword">请输入正确格式的密码</small>
                                    </span>
                                    <input type="password"
                                           placeholder="请输入6~15位密码"
                                           name="userpassword"
                                           ng-model="user.userpassword"
                                           ng-minlength=6 ng-maxlength=15 required
                                           id="userPassword"
                                           class="form-control"/>
                                </div>
                                <div class="form-group" ng-class="{true: 'form-group has-error', false: 'form-group'}[(signupForm.confirmPassword.$invalid&& submitted)||(user.confirmPassword!=''&&user.confirmPassword!=user.userpassword&&submitted)]">
                                    <label for="confirmPassword">确认密码</label>
                                    <span class="pull-right"
                                          ng-show="(signupForm.confirmPassword.$dirty && signupForm.confirmPassword.$invalid&& submitted)||(user.confirmPassword!=user.userpassword&&submitted)">
                                        <small ng-show="signupForm.confirmPassword.$error.required">请确认密码</small>
                                        <small ng-show="signupForm.confirmPassword.$error.minlength">请输入6~15位密码字符</small>
                                        <small ng-show="signupForm.confirmPassword.$error.maxlength">请输入6~15位密码字符</small>
                                        <small ng-show="signupForm.confirmPassword.$error.confirmPassword">请输入正确格式的密码</small>
                                        <small ng-show="user.confirmPassword!=user.userpassword">两次输入的密码不想同</small>
                                    </span>

                                    <input type="password"
                                           placeholder="请输入6~15位密码"
                                           name="confirmPassword"
                                           ng-model="user.confirmPassword"
                                           ng-minlength=6 ng-maxlength=15 required
                                           id="confirmPassword"
                                           class="form-control"/>
                                </div>
                                <div class="row clearfix" style="margin-bottom: 10px" ng-class="{true: 'row clearfix has-error', false: 'row clearfix'}[signupForm.verificationCode.$invalid&& submitted]">
                                    <div class="col-md-7">
                                        <label for="verificationCode">验证码</label>
                                        <span class="pull-right"
                                              ng-show="signupForm.verificationCode.$dirty && signupForm.verificationCode.$invalid&& submitted">
                                        <small ng-show="signupForm.verificationCode.$error.required">请输入验证码</small>
                                        <small ng-show="signupForm.verificationCode.$error.minlength">请输入6验证码</small>
                                        <small ng-show="signupForm.verificationCode.$error.maxlength">请输入6验证码</small>
                                        <small ng-show="signupForm.verificationCode.$error.confirmPassword">请输入正确格式的密码</small>
                                        <small ng-show="signupForm.verificationCode.$invalid">请输入正确格式的密码</small>
                                    </span>
                                    </div>
                                    <div class="col-md-7">
                                        <!--<input type="text" class="form-control col-md-6" id="exampleInputPassword3"
                                               placeholder="请输入验证码">-->
                                        <input type="text"
                                               placeholder="请输入验证码"
                                               name="verificationCode"
                                               ng-model="user.verificationCode"
                                               ng-minlength=6 ng-maxlength=6 required
                                               id="verificationCode"
                                               ng-pattern="/^\w{6}(,\w{6})*$/"
                                               class="form-control"/>
                                    </div>
                                    <div class="col-md-5">
                                        <img src="/rs/create_validate_code" id="verfity_code_img" alt="点击更新"
                                             title="点击更新验证码" style="cursor: pointer;height: 35px"
                                             onclick="refresh_validate_code()"/>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-default pull-right">&nbsp;&nbsp;注&nbsp;&nbsp;&nbsp;&nbsp;册&nbsp;&nbsp;</button>
                            </form>
                            <span>{{passwordVerify}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--<div class="row"   ng-app="signup">
        <div class="col-md-5" ng-controller="verifyForm">
            <form name="signup_form" novalidate ng-submit="signupForm()">
                <fieldset>
                    <legend>Signup</legend>
                    <div class="row">
                        <div class="large-12 columns">
                            <label>Your name</label>
                            <input type="text"
                                   placeholder="Name"
                                   name="name"
                                   ng-model="signup.name"
                                   ng-minlength=3
                                   ng-maxlength=20 required />
                            <div class="error"
                                 ng-show="signup_form.name.$dirty && signup_form.name.$invalid && signup_form.submitted">
                                <small class="error"
                                       ng-show="signup_form.name.$error.required">
                                    Your name is required.
                                </small>
                                <small class="error"
                                       ng-show="signup_form.name.$error.minlength">
                                    Your name is required to be at least 3 characters
                                </small>
                                <small class="error"
                                       ng-show="signup_form.name.$error.maxlength">
                                    Your name cannot be longer than 20 characters
                                </small>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="large-12 columns">
                            <label>Your email</label>
                            <input type="email"
                                   placeholder="Email"
                                   name="email"
                                   ng-model="signup.email"
                                   ng-minlength=3 ng-maxlength=20 required />
                            <div class="error"
                                 ng-show="signup_form.email.$dirty && signup_form.email.$invalid&& signup_form.submitted">
                                <small class="error"
                                       ng-show="signup_form.email.$error.required">
                                    Your email is required.
                                </small>
                                <small class="error"
                                       ng-show="signup_form.email.$error.minlength">
                                    Your email is required to be at least 3 characters
                                </small>
                                <small class="error"
                                       ng-show="signup_form.email.$error.email">
                                    That is not a valid email. Please input a valid email.
                                </small>
                                <small class="error"
                                       ng-show="signup_form.email.$error.maxlength">
                                    Your email cannot be longer than 20 characters
                                </small>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="button radius">Submit</button>
                </fieldset>
            </form>
        </div>
    </div>-->
</div>
<!--<script>
    var verfityApp =  angular.module('signup', []);
    verfityApp.controller('verifyForm', ['$scope', function($scope) {
        $scope.submitted = false;
        $scope.signupForm = function() {
            if ($scope.signup_form.$valid) {
                // Submit as normal
                alert("表单验证通过");
            } else {
                $scope.signup_form.submitted = true;
            }
        }
    }]);
</script>-->
</body>
</html>
